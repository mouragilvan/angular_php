<app-loading [active]="loading"></app-loading>
<div class="container pt-3">
    <h2>
        <img src="https://cdn-icons-png.flaticon.com/512/2250/2250401.png" style="width:40px" />
        Pedido
    </h2>
    <div class="mt-3">
        <form [formGroup]="myform">

            <div class="row mb-3">
                <div class="col-md-8 no-padding">
                    <select formControlName="customer" class="form-control">
                        <option value="">:: Selecione um cliente ::</option>
                        <option *ngFor="let c of customers" [value]="c.id">{{c.name}}</option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div class="col-md-8 no-padding">
                    <input type="text" class="form-control" formControlName="name" placeholder="Escolha um produto"
                        (input)="search()" />
                </div>
            </div>
            <div *ngIf="itemSelected.length>0" class="mt-4">
                <div *ngFor="let item of itemSelected" class="row mt-3">
                    <div class="col-5 lightcolor">
                        {{item.name}}

                    </div>

                    <div class="col-3 lightcolor no-padding">
                        <button class="btn btn-secondary btn-block" (click)="add(item)">
                            <i class="fa fa-plus"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div *ngIf="itensList.length > 0" class="row">
                <div class="col-8">
                    <hr />
                </div>
            </div>
            <div *ngIf="itensList.length > 0" class="row mt-4">
                <div class="col-5 pt-2" style="border: 1px solid lightgray;">
                    <p *ngFor="let p of itensList">
                        {{p?.name}}
                        <button class="btn btn-warning" (click)="remove(p)">
                            <i class="fa fa-minus"></i>
                        </button>
                    </p>
                </div>
                <div class="col-3 no-padding">
                    <h2><span class="badge badge-primary btn-block">Total: R$ {{total.toFixed(2)}}</span></h2>
                    <button class="btn btn-success  btn-block" (click)="save()">Salvar pedido</button>
                </div>
            </div>

        </form>
    </div>
</div>